{% extends "index.html" %}
{% load bootstrap4 %}
{% block title %} Регистрация {% endblock %}
{% block content %}
<h2>Регистрация нового пользователя</h2>
<form method="post">
    {% csrf_token %}
    {% bootstrap_form form layout='horizontal' %}
 <!-- Модальное окно -->
<div class="modal fade" id="agreementModal" tabindex="-1" role="dialog" aria-labelledby="agreementModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="agreementModalLabel">Лицензионное Соглашение</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Закрыть">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Текст лицензионного соглашения -->
                <p>Текст лицензионного соглашения...</p>
                <input type="checkbox" id="modal-consent" name="modal-consent">
                <label for="modal-consent">Я согласен с условиями</label>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
                <button type="button" class="btn btn-primary" id="agree-btn">Согласиться</button>
            </div>
        </div>
    </div>
</div>

<input style="margin-left: 286px" type="checkbox" name="consent" id="consent" disabled>
<a href="#" data-toggle="modal" data-target="#agreementModal">Согласие на обработку персональных данных</a>
    {% buttons submit='Зарегистрироваться' %} {% endbuttons %}
</form>
<script>
    document.getElementById('modal-consent').addEventListener('change', function() {
        if (this.checked) {
            document.getElementById('consent').removeAttribute('disabled');
        } else {
            document.getElementById('consent').setAttribute('disabled', 'disabled');
        }
    });

    document.getElementById('agree-btn').addEventListener('click', function() {
        if (document.getElementById('modal-consent').checked) {
            document.getElementById('consent').checked = true;
            document.getElementById('consent').removeAttribute('disabled');
            $('#agreementModal').modal('hide');
        } else {
            alert('Пожалуйста, подтвердите согласие.');
        }
    });
</script>
{% endblock %}